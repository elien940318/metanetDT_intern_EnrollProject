<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.oopsw.member.dao.PlanDAO"> 
	
	<select id="getSelectPlanList" resultType="com.oopsw.member.dto.SubjectDTO"> 
		 SELECT s.subject_no as subjectNo, subj_name as subjName,subj_score as subjScore
		 		,dep.dept_name as deptName,subj_professor as subjProfessor, subj_semester as subjSemester
		 FROM subjects s, departmentes dep
		 WHERE dep.department_no = s.department_no
		 <include refid="searchitem"/>
	</select>
	
	<select id="getPlanDetail" resultType="com.oopsw.member.dto.SubjectDTO"> 
		 SELECT s.subject_no as subjectNo,subj_name as subjName,subj_score as subjScore,subj_semester as subjSemester
		 		,dep.dept_name deptName,subj_professor as subjProfessor,lect_date as lectDate, subj_group as subjGroup
		 		,lect_start as lectStart,lect_end as lectEnd,lect_room as lectRoom
		 		,outline,proceed,note,evaluation,progress_plan as progressPlan
		 FROM subjects s, departmentes dep
		 WHERE dep.department_no = s.department_no AND s.subject_no =#{subjectNo}
	</select>
	
	

	<sql id="searchitem">
		<if test="search.radioItem != null">
			<if test="search.radioItem == 's'.toString()">AND s.subj_name LIKE '%'||#{search.search}||'%'</if>
			<if test="search.radioItem == 'p'.toString()">AND s.subj_professor LIKE '%'||#{search.search}||'%'</if>
			<if test="search.radioItem == 'n'.toString()">AND s.subject_no LIKE '%'||#{search.search}||'%'</if>
		</if>
	</sql>


</mapper>