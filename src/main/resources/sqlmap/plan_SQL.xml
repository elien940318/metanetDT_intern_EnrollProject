<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.oopsw.member.dao.PlanDAO"> 
	
	<select id="getNameList" resultType="com.oopsw.member.dto.StudentDTO"> 
		 SELECT s.subject_no,subj_name,subj_score,dep.dept_name,subj_professor
		 FROM subjects s, departmentes dep
		 WHERE dep.department_no = s.department_no
	</select>
	<select id="getPlanDetail" resultType="com.oopsw.member.dto.StudentDTO"> 
		 SELECT s.subject_no,subj_name,subj_score,dep.dept_name,subj_professor,lect_date,lect_start,lect_end,lect_room,outline,proceed,note,evaluation,progress_plan
		 FROM subjects s, departmentes dep
		 WHERE dep.department_no = s.department_no AND s.subject_no =#{subjectNo}
	</select>

	<sql id="search">
		<if test="searchType != null">
			<if test="searchType == 's'.toString()">AND s.subj_name LIKE '%'||#{search}||'%'</if>
			<if test="searchType == 'p'.toString()">AND s.subj_professor LIKE '%'||#{search}||'%'</if>
			<if test="searchType == 'n'.toString()">AND s.subject_no LIKE '%'||#{search}||'%'</if>
		</if>
	</sql>


</mapper>